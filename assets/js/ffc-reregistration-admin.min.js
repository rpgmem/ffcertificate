!function(i){"use strict";i(function(){i("#cb-select-all").on("change",function(){var e=i(this).is(":checked");i('input[name="submission_ids[]"]').prop("checked",e)}),i("#ffc-submissions-form").on("submit",function(e){var n=i(this).find('select[name="bulk_action"]').val(),t=i('input[name="submission_ids[]"]:checked').length;if(n&&t){if("approve"===n){var a=window.ffcReregistrationAdmin&&window.ffcReregistrationAdmin.strings?window.ffcReregistrationAdmin.strings.confirmApprove:"Approve selected submissions?";confirm(a)||e.preventDefault()}if("return_to_draft"===n){var r=window.ffcReregistrationAdmin&&window.ffcReregistrationAdmin.strings?window.ffcReregistrationAdmin.strings.confirmReturnToDraft:"Return selected submissions to draft? Users will be able to edit and resubmit.";confirm(r)||e.preventDefault()}}else e.preventDefault()}),i(document).on("click",".ffc-return-draft-btn",function(i){var e=(window.ffcReregistrationAdmin&&window.ffcReregistrationAdmin.strings||{}).confirmReturnToDraft||"Return this submission to draft? The user will be able to edit and resubmit.";confirm(e)||i.preventDefault()}),i(document).on("click",".ffc-ficha-btn",function(){var e=i(this),n=e.data("submission-id"),t=window.ffcReregistrationAdmin&&window.ffcReregistrationAdmin.strings||{};n&&(e.prop("disabled",!0).text(t.generatingPdf||"Generating PDF..."),i.post(ffcReregistrationAdmin.ajaxUrl,{action:"ffc_generate_ficha",nonce:ffcReregistrationAdmin.fichaNonce,submission_id:n},function(i){e.prop("disabled",!1).html('<span class="dashicons dashicons-media-document" style="vertical-align:middle;font-size:14px"></span> Ficha'),i.success&&i.data.pdf_data?"function"==typeof window.ffcGeneratePDF?window.ffcGeneratePDF(i.data.pdf_data,i.data.pdf_data.filename||"ficha.pdf"):alert(t.errorGenerating||"PDF generator not available."):alert(i.data&&i.data.message?i.data.message:t.errorGenerating||"Error generating ficha.")}).fail(function(){e.prop("disabled",!1).html('<span class="dashicons dashicons-media-document" style="vertical-align:middle;font-size:14px"></span> Ficha'),alert(t.errorGenerating||"Error generating ficha.")}))})})}(jQuery);