!function(r){"use strict";r(document).ready(function(){var t="undefined"!=typeof ffcMigrations?ffcMigrations.strings:{};r(".ffc-migration-actions a.button-primary").on("click",function(e){e.preventDefault();var i=r(this),n=i.attr("href"),o=i.closest(".ffc-migration-card"),a=i.next(".description"),s=i.html(),c=0,f=i.data("confirm")||t.confirmMigration||"Are you sure you want to run this migration?";if(!confirm(f))return!1;return i.prop("disabled",!0).html('<span class="dashicons dashicons-update dashicons-spin"></span> '+(t.processing||"Processing...")),function e(){r.ajax({url:n,type:"GET",dataType:"html",success:function(n){var s=r(n).find(".ffc-migration-card").filter(function(){return r(this).find("h3").text()===o.find("h3").text()});if(s.length){var f=s.find(".ffc-progress-bar-container").attr("aria-valuenow");f&&(o.find(".ffc-progress-bar-fill").css("width",f+"%"),o.find(".ffc-progress-bar-container").attr("aria-valuenow",f),o.find(".ffc-progress-bar-label").text(parseFloat(f).toFixed(1)+"% "+(t.complete||"Complete")));var l=s.find(".ffc-migration-stats");o.find(".ffc-migration-stats").html(l.html()),c+=100,a.html((t.processed||"Processed ")+"<strong>"+c+"</strong> "+(t.records||"records...")),s.find(".button[disabled]").length>0?(i.html('<span class="dashicons dashicons-yes-alt"></span> '+(t.migrationComplete||"Migration Complete")),a.html("✓ "+(t.allRecordsMigrated||"All records have been successfully migrated.")),setTimeout(function(){location.reload()},2e3)):setTimeout(e,500)}else location.reload()},error:function(r,e,n){console.error("Migration error:",n),i.prop("disabled",!1).html(s),a.html("✗ "+(t.errorOccurred||"Error occurred. Please try again."))}})}(),!1})})}(jQuery);