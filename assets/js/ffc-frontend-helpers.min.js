!function(t,e){"use strict";e.FFC=e.FFC||{};var i={validateCPF:function(t){if(11!==(t=t.replace(/[^\d]+/g,"")).length)return!1;if(/^(\d)\1{10}$/.test(t))return!1;for(var e=0,i=0;i<9;i++)e+=parseInt(t.charAt(i))*(10-i);var n=11-e%11;if(n>=10&&(n=0),n!==parseInt(t.charAt(9)))return!1;e=0;for(var a=0;a<10;a++)e+=parseInt(t.charAt(a))*(11-a);var r=11-e%11;return r>=10&&(r=0),r===parseInt(t.charAt(10))},validateRF:function(t){return 7===(t=t.replace(/[^\d]+/g,"")).length&&/^\d{7}$/.test(t)},validateEmail:function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}},n={applyCpfRf:function(e){e&&0!==e.length||(e=t('input[name="cpf_rf"], input[name="cpf"], input[id*="cpf"]')),0!==e.length&&(e.each(function(){var e=t(this);e.off("input.cpfrf blur.cpfrf paste.cpfrf"),e.on("input.cpfrf",function(){var e=t(this).val().replace(/\D/g,"");e.length>11&&(e=e.substring(0,11));var i="";i=e.length<=7?e.length<=3?e:e.length<=6?e.substring(0,3)+"."+e.substring(3):e.substring(0,3)+"."+e.substring(3,6)+"-"+e.substring(6):e.length<=3?e:e.length<=6?e.substring(0,3)+"."+e.substring(3):e.length<=9?e.substring(0,3)+"."+e.substring(3,6)+"."+e.substring(6):e.substring(0,3)+"."+e.substring(3,6)+"."+e.substring(6,9)+"-"+e.substring(9),t(this).val(i),t(this).removeClass("ffc-invalid ffc-valid")}),e.on("blur.cpfrf",function(){var e=t(this).val().replace(/\D/g,"");if(0===e.length)return t(this).removeClass("ffc-invalid ffc-valid").removeAttr("aria-invalid aria-describedby"),void t(this).next(".ffc-field-error").remove();var n=!1,a="",r="undefined"!=typeof ffc_ajax&&ffc_ajax.strings?ffc_ajax.strings:{};7===e.length?(n=i.validateRF(e),a=r.rfInvalid||"Invalid RF"):11===e.length?(n=i.validateCPF(e),a=r.cpfInvalid||"Invalid CPF"):a=r.enterValidCpfRf||"Enter a valid CPF (11 digits) or RF (7 digits)";var s="ffc-error-"+(t(this).attr("id")||t(this).attr("name")||"cpfrf");if(n)t(this).removeClass("ffc-invalid").addClass("ffc-valid").removeAttr("aria-invalid aria-describedby"),t(this).next(".ffc-field-error").fadeOut(function(){t(this).remove()});else{t(this).removeClass("ffc-valid").addClass("ffc-invalid").attr("aria-invalid","true").attr("aria-describedby",s);var f=t(this).next(".ffc-field-error");0===f.length&&(f=t('<span class="ffc-field-error" role="alert"></span>').insertAfter(t(this))),f.attr("id",s).text(a).fadeIn(),setTimeout(function(){f.fadeOut()},5e3)}}),e.on("paste.cpfrf",function(){var e=t(this);setTimeout(function(){e.trigger("input")},10)}),e.val()&&e.trigger("input")}),t("#ffc-validation-styles").length||t('<style id="ffc-validation-styles">input.ffc-valid { border-color: #00a32a !important; background: #f0f9ff; }input.ffc-invalid { border-color: #d63638 !important; background: #fff3f3; }.ffc-field-error { display: block; color: #d63638; font-size: 12px; margin-top: 5px; animation: ffcSlideDown 0.3s ease; }</style>').appendTo("head"))},applyAuthCode:function(e){e&&0!==e.length||(e=t('input[name="ffc_auth_code"], .ffc-verify-input, .ffc-manual-auth-code')),0!==e.length&&e.each(function(){var e=t(this);e.off("input.authcode paste.authcode"),e.on("input.authcode",function(){var e=t(this).val().toUpperCase().replace(/[^A-Z0-9]/g,"");e.length>12&&(e=e.substring(0,12));var i="";i=e.length<=4?e:e.length<=8?e.substring(0,4)+"-"+e.substring(4):e.substring(0,4)+"-"+e.substring(4,8)+"-"+e.substring(8),t(this).val(i)}),e.on("paste.authcode",function(){var e=t(this);setTimeout(function(){e.trigger("input")},10)}),e.val()&&e.trigger("input")})},applyTicket:function(e){e&&0!==e.length||(e=t('input[name="ffc_ticket"], .ffc-ticket-input, #ffc_ticket')),0!==e.length&&e.each(function(){var e=t(this);e.off("input.ticket paste.ticket"),e.on("input.ticket",function(){var e=t(this).val().toUpperCase().replace(/[^A-Z0-9]/g,"");e.length>8&&(e=e.substring(0,8));var i="";i=e.length<=4?e:e.substring(0,4)+"-"+e.substring(4),t(this).val(i)}),e.on("paste.ticket",function(){var e=t(this);setTimeout(function(){e.trigger("input")},10)}),e.val()&&e.trigger("input")})}};function a(t){return t?String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}var r={showFormError:function(e,i){e.find(".ffc-form-error").remove();var n=t('<div class="ffc-form-error"></div>').css({background:"#f8d7da",color:"#721c24",padding:"15px 20px",margin:"0 0 20px 0","border-radius":"5px",border:"1px solid #f5c6cb","font-size":"14px","line-height":"1.5",animation:"ffcSlideDown 0.3s ease"}).html("<strong>"+(0===a(i).indexOf("Error")?"":"Error: ")+"</strong>"+a(i));t("#ffc-slide-animation").length||t('<style id="ffc-slide-animation">@keyframes ffcSlideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }</style>').appendTo("head"),e.prepend(n),t("html, body").animate({scrollTop:n.offset().top-100},300),setTimeout(function(){n.fadeOut(300,function(){t(this).remove()})},1e4)},showFormSuccess:function(e,i){if(e.find(".ffc-form-error, .ffc-form-success").remove(),i&&i.trim().length>0)e.html(i);else{var n=t('<div class="ffc-form-success"></div>').css({background:"#d4edda",color:"#155724",padding:"20px",margin:"0 0 20px 0","border-radius":"5px",border:"1px solid #c3e6cb","text-align":"center",animation:"ffcSlideDown 0.3s ease"}).html('<h3 style="margin: 0 0 10px 0; font-size: 20px;">✅ '+(ffc_ajax.strings.success||"Success!")+'</h3><p style="margin: 0;">'+(ffc_ajax.strings.submissionSuccessful||"Your submission was successful.")+"</p>");e.html(n)}},refreshCaptcha:function(t,e,i){var n=t.find(".ffc-captcha-label-text").first(),a=t.find('input[name="ffc_captcha_ans"]'),r=t.find('input[name="ffc_captcha_hash"]');n.length&&e&&n.text(e),r.length&&i&&r.val(i),a.length&&(a.val("").focus(),a.css("background-color","#fffbcc"),setTimeout(function(){a.css({"background-color":"#fff",transition:"background-color 0.5s"})},100))}},s={blocked:!1,waitSeconds:0,countdownInterval:null,show:function(e,i){this.blocked=!0,this.waitSeconds=i;var n=t(".ffc-form"),a=n.find('button[type="submit"]');n.prepend('<div class="ffc-rate-limit-notice"><div class="ffc-rate-limit-icon">⏱️</div><div class="ffc-rate-limit-message">'+e+' <strong id="ffc-countdown">0:00</strong></div></div>');var r="undefined"!=typeof ffc_ajax&&ffc_ajax.strings&&ffc_ajax.strings.wait||"Wait...";a.prop("disabled",!0).html(r+' (<span id="ffc-countdown-btn">0:00</span>)'),this.startCountdown()},startCountdown:function(){var e=this,i=this.waitSeconds,n=function(){if(i<=0)e.enable();else{var a=Math.floor(i/60),r=i%60,s=a+":"+(r<10?"0":"")+r;t("#ffc-countdown").text(s),t("#ffc-countdown-btn").text(s),i--,setTimeout(n,1e3)}};n()},enable:function(){this.blocked=!1,t(".ffc-rate-limit-notice").remove();var e="undefined"!=typeof ffc_ajax&&ffc_ajax.strings&&ffc_ajax.strings.send||"Send";t('.ffc-form button[type="submit"]').prop("disabled",!1).text(e)}};e.FFC.Frontend={Validation:i,Masks:n,UI:r,RateLimit:s},e.ffcUtils={applyCpfRfMask:n.applyCpfRf,applyAuthCodeMask:n.applyAuthCode,applyTicketMask:n.applyTicket,validateCPF:i.validateCPF,validateRF:i.validateRF,showFormError:r.showFormError,showFormSuccess:r.showFormSuccess,refreshCaptcha:r.refreshCaptcha},e.FFCRateLimit=s}(jQuery,window);